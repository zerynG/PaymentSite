{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h1>{% if form.instance.pk %}Редактирование{% else %}Добавление{% endif %} исполнителя</h1>
    
    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            {{ form.as_p }}
        </div>
        <button type="submit" class="btn btn-primary">Сохранить</button>
        <a href="{% url 'contractors:contractors_list' %}" class="btn btn-secondary">Отмена</a>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const contractTypeSelect = document.getElementById('id_contract_type');
    const taxRateField = document.getElementById('id_tax_rate');
    
    function updateTaxRateField() {
        if (contractTypeSelect.value === 'NPD') {
            taxRateField.value = '0';
            taxRateField.disabled = true;
        } else {
            taxRateField.disabled = false;
        }
    }
    
    contractTypeSelect.addEventListener('change', updateTaxRateField);
    updateTaxRateField(); // Initial call
});
</script>
{% endblock %}